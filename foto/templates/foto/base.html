{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %} Base Title {% endblock %}    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ STATIC_URL}}/static/main.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'home' %}">ФотоКонкурс</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="{% url 'home' %}">Главная</a>
        </li>
          {% if user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'user' %}">Личный кабинет</a>
        </li>
          <li class="nav-item">
          <a class="nav-link" href="{% url 'add_foto' %}">Загрузить фото</a>
        </li>
          {% endif %}
        <li class="nav-item">
          <a class="nav-link disabled">Неактивно</a>
        </li>
      </ul>
        {% if user.is_authenticated %}
        <div class="user_block">
            {% if user.first_name %}
            <p>Привет,  {{user.first_name}}!</p>
            {% else %}
            <p>Привет,  {{user.username}}!</p>
            {% endif %}
    <form action="{% url 'account_logout' %}" method ='POST'>
        {% csrf_token %}
        <button type="submit" class="btn btn-light">Выйти</button>
    </form>
        </div>


    {% else %}
    <div class="user_block">
        <a href="{% url 'account_login' %}"><button class="btn btn-light">Войти</button></a>
        <a href="{% url 'account_signup' %}"><button class="btn btn-light">Регистрация</button></a>
    </div>
    {% endif %}
    </div>
  </div>
</nav>
    <div class="container-fluid">

      <div class="row p-4">
          <div class="col-md-2">
              <ul class="list-group list-group-flush">
                  {% for item in categories %}
                  <li class="list-group-item non_a"><a href="{% url 'category' item.pk %}">{{ item.title }}</a></li>
                  {% endfor%}
                </ul>
                <br>
                <!-- Поиск -->
                  <form class="search" method="post" action="{% url 'search' %}">
                      {% csrf_token %}
                <input class="form-control me-2" type="search" placeholder="" aria-label="Search" name="search">
                      <button class="btn btn-light" type="submit">Поиск</button>
              </form>

              <!-- Сортировка-->
              <div class="mg-h-10">
              <h5>Сортировать по:</h5>
               <select name="sort" id="sort-list" onchange="location = finalurl();" style="margin-left: auto;">
                    <option value="" id="placeholder" disabled selected hidden>Выбрать</option>
                    <option id="voices_count" value="-voices_count">Голосам</option>
                    <option id="comments_count" value="-comments_count">Комментариям</option>
                    <option id="-add_data" value="-add_data">Сначала новые</option>
                   <option id="add_data" value="add_data">Сначала старые</option>
                  </select>
          </div>
          </div>

          <div class="col-md-10">
              <h1>{% block h1%}Base H1{% endblock %}</h1>
              <div class="row p-2">


              {% block main_content %}
                {% endblock %}

                <!-- Pagination -->
                  {% if is_paginated %}
                <div class="pagination">
                <nav aria-label="Page navigation example">
                  <ul class="pagination">
                      {% if page_obj.has_previous %}
                    <li class="page-item">
                      <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous" tabindex="-1">
                        <span aria-hidden="true">&laquo;</span>
                      </a>
                    </li>
                      {% endif%}
                      {% for item in paginator.page_range %}
                      {% if item == page_obj.number%}
                        <li class="page-item active" aria-current="page"><a class="page-link" href="?page={{ item }}">{{ item }}</a></li>
                      {% else %}
                        <li class="page-item"><a class="page-link" href="?page={{ item }}">{{ item }}</a></li>
                      {% endif %}
                      {% endfor %}
                      {% if page_obj.has_next %}
                    <li class="page-item">
                      <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                      </a>
                    </li>
                      {% endif %}
                  </ul>
                </nav>
                    </div>
                {% endif %}
              </div>
          </div>

        </div>
    </div>
<!-- Footer -->
<footer class="bg-light text-center text-lg-start">
  <!-- Copyright -->
  <div class="text-center p-3" style="background-color: rgba(var(--bs-light-rgb),var(--bs-bg-opacity))!important;
};">
      <a href="{% url 'subscribe' %}" >Subscribe</a>

    © 2023 Copyright:
    <a class="text-dark" href="#">PythonDjango.com</a>
  </div>
  <!-- Copyright -->
</footer>
</body>
<script type="text/javascript" src="{{ STATIC_URL}}/static/script.js"></script>
</html>